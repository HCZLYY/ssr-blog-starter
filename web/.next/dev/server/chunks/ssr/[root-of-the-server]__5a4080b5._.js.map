{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///E:/%E5%AD%97%E8%8A%82-%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A-2/Github/ssr-blog-starter/web/pages/index.js"],"sourcesContent":["// web/pages/index.js\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/router';\r\n\r\nexport default function Index({ articles, page, limit, total }) {\r\n    const router = useRouter();\r\n    const lastPage = Math.max(1, Math.ceil(total / limit));\r\n\r\n    return (\r\n        <div style={{ maxWidth: 800, margin: '0 auto', padding: 16 }}>\r\n            <h1>文章列表</h1>\r\n            <ul style={{ listStyle: 'none', padding: 0 }}>\r\n                {articles.map(a => (\r\n                    <li key={a.id} style={{ padding: 12, borderBottom: '1px solid #eee' }}>\r\n                        {/* Link 自身就是 <a>，不要在内部再放 <a> */}\r\n                        <Link href={`/articles/${a.id}`} style={{ textDecoration: 'none', color: 'inherit', display: 'block' }}>\r\n                            <div>\r\n                                <h3 style={{ margin: 0 }}>{a.title}</h3>\r\n                                <p style={{ margin: '6px 0', color: '#666' }} dangerouslySetInnerHTML={{ __html: a.summary }} />\r\n                                <small>创建时间: {a.created_at}</small>\r\n                            </div>\r\n                        </Link>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n\r\n            <div style={{ marginTop: 16 }}>\r\n                <button disabled={page <= 1} onClick={() => router.push(`/?page=${page - 1}`)}>上一页</button>\r\n                <span style={{ margin: '0 8px' }}>第 {page} / {lastPage} 页</span>\r\n                <button disabled={page >= lastPage} onClick={() => router.push(`/?page=${page + 1}`)}>下一页</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport async function getServerSideProps(ctx) {\r\n    const page = parseInt(ctx.query.page || '1', 10);\r\n    const limit = 10;\r\n    try {\r\n        const res = await fetch(`http://localhost:3000/api/v1/articles?page=${page}&limit=${limit}`);\r\n        if (!res.ok) throw new Error('api error');\r\n        const json = await res.json();\r\n        return { props: { articles: json.value || [], page, limit, total: json.Count || 0 } };\r\n    } catch (err) {\r\n        return { props: { articles: [], page, limit, total: 0 } };\r\n    }\r\n}\r\n"],"names":[],"mappings":"AAAA,qBAAqB;;;;;;;;AACrB;AACA;;;;AAEe,SAAS,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE;IAC1D,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,QAAQ;IAE/C,qBACI,qKAAC;QAAI,OAAO;YAAE,UAAU;YAAK,QAAQ;YAAU,SAAS;QAAG;;0BACvD,qKAAC;0BAAG;;;;;;0BACJ,qKAAC;gBAAG,OAAO;oBAAE,WAAW;oBAAQ,SAAS;gBAAE;0BACtC,SAAS,GAAG,CAAC,CAAA,kBACV,qKAAC;wBAAc,OAAO;4BAAE,SAAS;4BAAI,cAAc;wBAAiB;kCAEhE,cAAA,qKAAC,gIAAI;4BAAC,MAAM,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE;4BAAE,OAAO;gCAAE,gBAAgB;gCAAQ,OAAO;gCAAW,SAAS;4BAAQ;sCACjG,cAAA,qKAAC;;kDACG,qKAAC;wCAAG,OAAO;4CAAE,QAAQ;wCAAE;kDAAI,EAAE,KAAK;;;;;;kDAClC,qKAAC;wCAAE,OAAO;4CAAE,QAAQ;4CAAS,OAAO;wCAAO;wCAAG,yBAAyB;4CAAE,QAAQ,EAAE,OAAO;wCAAC;;;;;;kDAC3F,qKAAC;;4CAAM;4CAAO,EAAE,UAAU;;;;;;;;;;;;;;;;;;uBAN7B,EAAE,EAAE;;;;;;;;;;0BAarB,qKAAC;gBAAI,OAAO;oBAAE,WAAW;gBAAG;;kCACxB,qKAAC;wBAAO,UAAU,QAAQ;wBAAG,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,GAAG;kCAAG;;;;;;kCAC/E,qKAAC;wBAAK,OAAO;4BAAE,QAAQ;wBAAQ;;4BAAG;4BAAG;4BAAK;4BAAI;4BAAS;;;;;;;kCACvD,qKAAC;wBAAO,UAAU,QAAQ;wBAAU,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,GAAG;kCAAG;;;;;;;;;;;;;;;;;;AAItG;AAEO,eAAe,mBAAmB,GAAG;IACxC,MAAM,OAAO,SAAS,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK;IAC7C,MAAM,QAAQ;IACd,IAAI;QACA,MAAM,MAAM,MAAM,MAAM,CAAC,2CAA2C,EAAE,KAAK,OAAO,EAAE,OAAO;QAC3F,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;QAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO;YAAE,OAAO;gBAAE,UAAU,KAAK,KAAK,IAAI,EAAE;gBAAE;gBAAM;gBAAO,OAAO,KAAK,KAAK,IAAI;YAAE;QAAE;IACxF,EAAE,OAAO,KAAK;QACV,OAAO;YAAE,OAAO;gBAAE,UAAU,EAAE;gBAAE;gBAAM;gBAAO,OAAO;YAAE;QAAE;IAC5D;AACJ"}}]
}